{"ast":null,"code":"import { NotificationType } from '../enum/notification-type.enum';\nimport { User } from '../model/user';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/expense.service\";\nimport * as i2 from \"../service/user.service\";\nimport * as i3 from \"../service/notification.service\";\nimport * as i4 from \"../service/authentication.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\n\nfunction HomepageComponent_tr_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const expense_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(3, 3, expense_r2.date, \"dd/MM/yyyy\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", expense_r2.value, \"\\u20AC\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(expense_r2.notes);\n  }\n}\n\nfunction HomepageComponent_div_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"br\");\n    i0.ɵɵelementStart(2, \"h1\");\n    i0.ɵɵtext(3, \"Non sono state effettuate spese durante questa settimana.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"br\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let HomepageComponent = /*#__PURE__*/(() => {\n  class HomepageComponent {\n    constructor(expenseService, userService, notificationService, authenticationService, router) {\n      this.expenseService = expenseService;\n      this.userService = userService;\n      this.notificationService = notificationService;\n      this.authenticationService = authenticationService;\n      this.router = router;\n      this.expenses = [];\n      this.user = new User();\n      this.totExpensesWeek = 0;\n      this.totExpenseMonth = 0;\n      this.subscriptions = [];\n    }\n\n    ngOnInit() {\n      if (!this.authenticationService.isLoggedIn()) {\n        this.router.navigateByUrl(\"/login\");\n        this.notificationService.notify(NotificationType.ERROR, \"You need to log in to access this page.\");\n      }\n\n      this.user = this.authenticationService.getUserFromLocalCache();\n      this.getExpenses();\n    }\n\n    getExpenses() {\n      this.expenseService.getExpensesOfWeek(this.user.id).subscribe(response => {\n        this.expenses = response;\n        this.expenses.forEach(element => {\n          this.totExpensesWeek += element.value;\n        });\n        this.expenseService.getLastExpenseDate(this.user.id).subscribe(response => {\n          if (response != null) this.lastExpense = response.date;else this.lastExpense = null;\n        });\n        this.expenseService.getExpensesOfMonth(this.user.id).subscribe(response => {\n          response.forEach(element => {\n            this.totExpenseMonth += element.value;\n          });\n        });\n      });\n    }\n\n    logout() {\n      this.authenticationService.logout();\n      this.router.navigateByUrl(\"/login\");\n      this.notificationService.notify(NotificationType.SUCCESS, \"Logout eseguito correttamente.\");\n    }\n\n    sendNotification(notificationType, message) {\n      if (message) {\n        this.notificationService.notify(notificationType, message);\n      } else {\n        this.notificationService.notify(notificationType, 'An error occurred. Please try again.');\n      }\n    }\n\n  }\n\n  HomepageComponent.ɵfac = function HomepageComponent_Factory(t) {\n    return new (t || HomepageComponent)(i0.ɵɵdirectiveInject(i1.ExpenseService), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.NotificationService), i0.ɵɵdirectiveInject(i4.AuthenticationService), i0.ɵɵdirectiveInject(i5.Router));\n  };\n\n  HomepageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HomepageComponent,\n    selectors: [[\"app-homepage\"]],\n    decls: 60,\n    vars: 14,\n    consts: [[1, \"navbar\", \"navbar-expand\", \"navbar-dark\", \"bg-dark\", \"mb-4\"], [\"href\", \"#\", 1, \"navbar-brand\"], [\"id\", \"myTab\", \"role\", \"tablist\", 1, \"navbar-nav\"], [1, \"nav-item\", \"active\"], [\"data-toggle\", \"tab\", \"href\", \"search\", 1, \"nav-link\"], [1, \"nav-item\"], [\"data-toggle\", \"tab\", \"href\", \"insert\", 1, \"nav-link\"], [1, \"container-xl\", \"px-4\", \"mt-4\"], [1, \"mt-0\", \"mb-4\"], [1, \"row\"], [1, \"col-lg-4\", \"mb-4\"], [1, \"card\", \"h-100\", \"border-start-lg\", \"border-start-primary\"], [1, \"card-body\"], [1, \"small\", \"text-muted\"], [1, \"h3\", 2, \"margin-top\", \"15px\"], [1, \"card\", \"h-100\", \"border-start-lg\", \"border-start-secondary\"], [1, \"card\", \"h-100\", \"border-start-lg\", \"border-start-success\"], [\"id\", \"home\", 1, \"tab-pane\", \"fade\", \"show\"], [1, \"card\", \"mb-4\"], [1, \"card-header\"], [1, \"card-body\", \"p-0\"], [1, \"table\", \"mb-0\", \"fixed\"], [\"scope\", \"col\", 1, \"border-gray-200\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"logout\"], [1, \"btn\", \"btn-primary\", \"btn-lg\", 3, \"click\"]],\n    template: function HomepageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"a\", 1);\n        i0.ɵɵelementStart(2, \"h2\");\n        i0.ɵɵtext(3, \"Bankchecker\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\");\n        i0.ɵɵelementStart(5, \"ul\", 2);\n        i0.ɵɵelementStart(6, \"li\", 3);\n        i0.ɵɵelementStart(7, \"a\", 4);\n        i0.ɵɵtext(8, \"Cerca Spese\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"li\", 5);\n        i0.ɵɵelementStart(10, \"a\", 6);\n        i0.ɵɵtext(11, \"Inserisci Spesa\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 7);\n        i0.ɵɵelement(13, \"hr\", 8);\n        i0.ɵɵelementStart(14, \"div\", 9);\n        i0.ɵɵelementStart(15, \"div\", 10);\n        i0.ɵɵelementStart(16, \"div\", 11);\n        i0.ɵɵelementStart(17, \"div\", 12);\n        i0.ɵɵelementStart(18, \"div\", 13);\n        i0.ɵɵtext(19, \"Spese della Settimana:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 14);\n        i0.ɵɵtext(21);\n        i0.ɵɵpipe(22, \"number\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"div\", 10);\n        i0.ɵɵelementStart(24, \"div\", 15);\n        i0.ɵɵelementStart(25, \"div\", 12);\n        i0.ɵɵelementStart(26, \"div\", 13);\n        i0.ɵɵtext(27, \"Ultima spesa effettuata:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"div\", 14);\n        i0.ɵɵtext(29);\n        i0.ɵɵpipe(30, \"date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"div\", 10);\n        i0.ɵɵelementStart(32, \"div\", 16);\n        i0.ɵɵelementStart(33, \"div\", 12);\n        i0.ɵɵelementStart(34, \"div\", 13);\n        i0.ɵɵtext(35, \"Spese da inizio Mese:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"div\", 14);\n        i0.ɵɵtext(37);\n        i0.ɵɵpipe(38, \"number\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"div\", 17);\n        i0.ɵɵelementStart(40, \"div\", 18);\n        i0.ɵɵelementStart(41, \"div\", 19);\n        i0.ɵɵtext(42, \"Spese della settimana: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"div\", 20);\n        i0.ɵɵelementStart(44, \"div\");\n        i0.ɵɵelementStart(45, \"table\", 21);\n        i0.ɵɵelementStart(46, \"thead\");\n        i0.ɵɵelementStart(47, \"tr\");\n        i0.ɵɵelementStart(48, \"th\", 22);\n        i0.ɵɵtext(49, \"Data\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"th\", 22);\n        i0.ɵɵtext(51, \"Spesa\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(52, \"th\", 22);\n        i0.ɵɵtext(53, \"Note\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(54, \"tbody\");\n        i0.ɵɵtemplate(55, HomepageComponent_tr_55_Template, 8, 6, \"tr\", 23);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(56, HomepageComponent_div_56_Template, 5, 0, \"div\", 24);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(57, \"div\", 25);\n        i0.ɵɵelementStart(58, \"button\", 26);\n        i0.ɵɵlistener(\"click\", function HomepageComponent_Template_button_click_58_listener() {\n          return ctx.logout();\n        });\n        i0.ɵɵtext(59, \"Logout\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(21);\n        i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(22, 5, ctx.totExpensesWeek, \".2-2\"), \"\\u20AC\");\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(30, 8, ctx.lastExpense, \"EEEE, d MMMM yyyy\"));\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(38, 11, ctx.totExpenseMonth, \".2-2\"), \"\\u20AC\");\n        i0.ɵɵadvance(18);\n        i0.ɵɵproperty(\"ngForOf\", ctx.expenses);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.expenses.length == 0);\n      }\n    },\n    directives: [i6.NgForOf, i6.NgIf],\n    pipes: [i6.DecimalPipe, i6.DatePipe],\n    styles: [\"body[_ngcontent-%COMP%]{margin-top:20px;background-color:#f2f6fc;color:#69707a}.img-account-profile[_ngcontent-%COMP%]{height:10rem}.rounded-circle[_ngcontent-%COMP%]{border-radius:50%!important}.card[_ngcontent-%COMP%]{box-shadow:0 .15rem 1.75rem #21283226;text-align:center}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{font-weight:500}.card-header[_ngcontent-%COMP%]:first-child{border-radius:.35rem .35rem 0 0}.card-header[_ngcontent-%COMP%]{padding:1rem 1.35rem;margin-bottom:0;background-color:#21283208;border-bottom:1px solid rgba(33,40,50,.125)}.form-control[_ngcontent-%COMP%], .dataTable-input[_ngcontent-%COMP%]{display:block;width:100%;padding:.875rem 1.125rem;font-size:.875rem;font-weight:400;line-height:1;color:#69707a;background-color:#fff;background-clip:padding-box;border:1px solid #c5ccd6;-webkit-appearance:none;appearance:none;border-radius:.35rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.nav-borders[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#0061f2;border-bottom-color:#0061f2}.nav-borders[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#69707a;border-bottom-width:.125rem;border-bottom-style:solid;border-bottom-color:transparent;padding:.5rem 0;margin-left:1rem;margin-right:1rem}.fa-2x[_ngcontent-%COMP%]{font-size:2em}.table-billing-history[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-billing-history[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1.375rem}.table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(caption) > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .dataTable-table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(caption) > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:.75rem;background-color:var(--bs-table-bg);border-bottom-width:1px;box-shadow:inset 0 0 0 9999px var(--bs-table-accent-bg)}.border-start-primary[_ngcontent-%COMP%]{border-left-color:#0061f2!important}.border-start-secondary[_ngcontent-%COMP%]{border-left-color:#6900c7!important}.border-start-success[_ngcontent-%COMP%]{border-left-color:#00ac69!important}.border-start-lg[_ngcontent-%COMP%]{border-left-width:.25rem!important}.h-100[_ngcontent-%COMP%]{height:100%!important}.navbar-brand[_ngcontent-%COMP%]{margin-left:20px}.navbar[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}.navbar[_ngcontent-%COMP%]   .dropdown-item.active[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:active{color:inherit;text-decoration:none;background-color:inherit}.navbar[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:focus, .navbar[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{color:#16181b;text-decoration:none;background-color:#f8f9fa}.logout[_ngcontent-%COMP%]{text-align:center}.fixed[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:120px;vertical-align:middle;padding:18px}.card[_ngcontent-%COMP%]{vertical-align:middle;text-align:center}@media (min-width: 767px){.navbar[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:not(.nav-link):after{width:0;height:0;margin-left:.5em;vertical-align:0;border-bottom:.3em solid transparent;border-top:.3em solid transparent;border-left:.3em solid}}\"]\n  });\n  return HomepageComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}