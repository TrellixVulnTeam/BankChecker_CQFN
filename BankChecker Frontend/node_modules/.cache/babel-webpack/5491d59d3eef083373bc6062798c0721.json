{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { NotificationType } from '../enum/notification-type.enum';\nimport { Expense } from '../model/expense';\nimport { User } from '../model/user';\nlet HomepageComponent = class HomepageComponent {\n  constructor(expenseService, userService, notificationService, authenticationService, router) {\n    this.expenseService = expenseService;\n    this.userService = userService;\n    this.notificationService = notificationService;\n    this.authenticationService = authenticationService;\n    this.router = router;\n    this.expenses = [];\n    this.user = new User();\n    this.totExpensesWeek = 0;\n    this.totExpenseMonth = 0;\n    this.subscriptions = [];\n    this.editExpense = new Expense(0, new Date(), 0, \"\", 0);\n  }\n\n  ngOnInit() {\n    this.user = this.authenticationService.getUserFromLocalCache();\n    this.getExpenses();\n  }\n\n  getExpenses() {\n    this.expenseService.getExpensesOfWeek(this.user.id).subscribe(response => {\n      this.expenses = response;\n      this.expenses.forEach(element => {\n        this.totExpensesWeek += element.value;\n      });\n      this.expenseService.getLastExpenseDate(this.user.id).subscribe(response => {\n        if (response != null) this.lastExpense = response.date;else this.lastExpense = null;\n      });\n      this.expenseService.getExpensesOfMonth(this.user.id).subscribe(response => {\n        response.forEach(element => {\n          this.totExpenseMonth += element.value;\n        });\n      });\n    });\n  }\n\n  logout() {\n    this.authenticationService.logout();\n    this.router.navigateByUrl(\"/login\");\n    this.notificationService.notify(NotificationType.SUCCESS, \"Logout eseguito correttamente.\");\n  }\n\n  sendNotification(notificationType, message) {\n    if (message) {\n      this.notificationService.notify(notificationType, message);\n    } else {\n      this.notificationService.notify(notificationType, 'An error occurred. Please try again.');\n    }\n  }\n\n  onEditExpense(editExpense) {\n    var _a;\n\n    (_a = document.getElementById('openUserInfo')) === null || _a === void 0 ? void 0 : _a.click();\n    this.editExpense = editExpense;\n  }\n\n};\nHomepageComponent = __decorate([Component({\n  selector: 'app-homepage',\n  templateUrl: './homepage.component.html',\n  styleUrls: ['./homepage.component.css']\n})], HomepageComponent);\nexport { HomepageComponent };","map":null,"metadata":{},"sourceType":"module"}